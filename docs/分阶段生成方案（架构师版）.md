# AI驱动的直播SaaS前端项目分阶段生成方案（架构师版）

---

## 核心理念
本方案旨在通过精细化的阶段划分，将一个复杂前端项目分解为一系列**高内聚、低耦合、可独立验证**的子任务。其核心是**依赖驱动、持续验证、并行优化**，确保在每个阶段都能产出高质量、符合规范的代码，最终平滑地集成为一个健壮的应用。

---

### **阶段零：地基与设计规范 (Foundation & Design System)**

- **🎯 目标**：搭建项目的骨架，并将UI设计规范代码化，为所有后续的UI开发提供统一、唯一的视觉标准。
- **📝 核心产出**：
    -   **项目配置文件**: `package.json`, `vite.config.ts`, `tsconfig.json`, `.eslintrc.js`, `.prettierrc`, `jest.config.js`, `.gitignore`, `README.md`。
    -   **核心源码文件**: 在 `src/` 目录下创建 `App.vue`, `main.ts`, `pages.json`, `manifest.json`, `env.d.ts`。
    -   **完整的空目录结构**: 在 `src/` 目录下创建 `api/`, `common/`, `components/`, `pages/`, `static/`, `store/`, `types/`, `utils/`；在根目录创建 `tests/`。
    -   **设计规范文件**: `src/common/uni.scss`（包含所有设计令牌的CSS变量）。
    -   **日志管理模块**: 在 `src/` 目录下创建 `logs/` 目录，包含 `logger.ts`, `logTypes.ts`, `logConfig.ts` 文件，用于日志记录和管理。

- **🔧 专属提示词要点**：
    - 严格基于《前端设计文档》7.3.7节，将所有颜色、字体、间距等视觉规范转换为CSS变量。
    - 只生成文件和空目录，不包含任何业务逻辑。
- **✅ 验证标准**：
    - 项目可以无错误地 `npm install` 和 `npm run dev`。
    - `common/uni.scss` 中的CSS变量与设计文档完全一致。

---

### **阶段一：数据契约与API层 (Data Contract & API Layer)**

- **🎯 目标**：建立与后端的通信桥梁，定义所有数据实体的TypeScript类型，形成前端的数据“契约”。
- **📝 核心产出**：
    -   **API封装文件**: `src/api/room.ts`, `src/api/session.ts`。
    -   **TypeScript类型定义**: `src/types/room.ts`, `src/types/session.ts`，用于定义 `Room`, `Session`, `Statistics` 等核心数据结构。
    -   **统一请求工具**: `src/utils/request.ts`。
- **🔧 专属提示词要点**：
    - 接口函数的签名、参数、返回值必须与后端文档100%匹配。
    - `src/types/` 目录下的类型定义是唯一的数据结构真实来源。
- **✅ 验证标准**：
    - （可选）可以通过Node.js脚本单独测试每个API函数是否能成功请求。
    - 所有API函数和返回数据都有严格的TypeScript类型约束。

---

### **阶段二：核心模块并行开发 (Core Modules Parallel Development)**

- **🎯 目标**：并行构建项目的两大核心支柱：一套完全独立、可复用的基础UI组件库，以及负责处理所有业务逻辑和数据流的状态管理模块。这两个模块互不依赖，可以同时进行开发。

#### **A. 基础UI套件 (Base UI Kit)**
- **📝 核心产出**：
    - **核心通用组件**: 在 `src/components/` 目录下创建以下组件：
        - `src/components/RoomCard.vue`: 房间卡片组件。
        - `src/components/ModalDialog.vue`: 通用弹窗组件。
        - `src/components/AppButton.vue`: 通用按钮组件。
- **🔧 专属提示词要点**：
    - 强调这些组件是“Dumb Components”，它们通过 `props` 接收数据，通过 `emits` 发出事件，内部**绝不**允许直接调用API或Store。
- **✅ 验证标准**：
    - 每个组件都可以在一个独立的页面（或Storybook）中正常渲染和交互。
    - 组件API（props/emits）清晰、完整。

#### **B. 状态管理层 (State Management)**
- **📝 核心产出**：
    -   **Pinia Stores**: `src/store/index.ts` (入口文件), `src/store/room.ts`, `src/store/session.ts`。
- **🔧 专属提示词要点**：
    - `State` 的数据结构**必须**从阶段一的 `src/types/` 目录中导入。
    - `Actions` **必须**调用阶段一的API函数来执行异步操作。
- **✅ 验证标准**：
    - 编写单元测试，验证每个Action在被调用后，State是否如预期一样被正确修改。

---


### **阶段三：页面总装与路由 (Page Assembly & Routing)**


- **🎯 目标**：将阶段二产出的基础UI组件与状态管理层结合，组装成最终用户可见的完整页面，并配置好页面间的跳转逻辑。
- **📝 核心产出**：
    -   **所有页面文件**: 
        - `src/pages/room/RoomList.vue`: 房间列表页。
        - `src/pages/room/RoomDetail.vue`: 房间详情页。
        - `src/pages/session/SessionList.vue`: 场次列表页。
        - `src/pages/live/LiveView.vue`: 直播观看页。
        - `src/pages/common/NotFound.vue`: 404页面。
    -   **路由配置**: 更新 `src/pages.json` 文件，包含所有上述页面的路径、样式和启动模式。
- **🔧 专属提示词要点**：
    - 页面文件本身应尽量保持“薄”，主要职责是组织布局和整合阶段二的业务组件。
    - 复杂的业务逻辑应已封装在状态管理层中。
- **✅ 验证标准**：
    - 应用可以完整运行，所有页面可根据 `pages.json` 的配置正确导航。
    - 页面显示的数据、布局、交互流程与设计文档完全一致。
    - **此阶段应进行端到端（E2E）测试**。

---

## 优化原因与核心优势
1.  **极致的关注点分离**：通过区分“基础UI套件”和“业务组件”，强制实现了UI展示与业务逻辑的解耦，极大提升了组件的可复用性和可维护性。
2.  **提升开发效率**：在**阶段二明确地将“基础UI”和“状态管理”并行化**，为并行开发提供了清晰的路线图，可以有效缩短项目周期。
3.  **前置设计系统**：在阶段零就将设计规范代码化，确保了项目从一开始就具备了视觉一致性的“基因”。
4.  **持续、闭环的验证**：每个阶段都有明确的、可执行的验证标准，并强调了测试应贯穿始终（单元测试、集成测试、E2E测试），保证了每个环节的质量，避免了问题积压到最后。这是一个更贴近现代CI/CD理念的工作流。 